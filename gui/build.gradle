import com.github.jengelman.gradle.plugins.shadow.tasks.ShadowJar

plugins {
    id 'com.github.johnrengelman.shadow'
    id 'java'
    id 'maven-publish'
}

repositories {
    jcenter()
}

sourceCompatibility = "${target}"
targetCompatibility = "${target}"

sourceSets.main {
    java {
        srcDirs = ['src']
    }
    resources {
        srcDirs = ['src']
        include '**/*.properties'
        include '**/*.gif'
        include '**/*.png'
        include '**/*.pro'
    }
}

dependencies {
    compile project(':base')
    compile 'com.guardsquare:proguard-core'
    compile project(':retrace')
}

jar {
    manifest.from 'src/META-INF/MANIFEST.MF'
}

task fatJar(type: ShadowJar) {
    archiveFileName.set('gui-fat.jar')
    configurations = [project.configurations.runtime]
}

assemble.dependsOn fatJar
